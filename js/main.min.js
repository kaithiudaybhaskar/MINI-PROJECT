$(document).ready(function(){$(".form-group-time-quantum").hide(),$("#algorithmSelector").on("change",function(){"optRR"===this.value?$(".form-group-time-quantum").show(1e3):$(".form-group-time-quantum").hide(1e3)});var W=[];$("#btnAddProcess").on("click",function(){var e=$("#processID"),t=$("#arrivalTime"),r=$("#burstTime");if(""===e.val()||""===t.val()||""===r.val())return e.addClass("is-invalid"),t.addClass("is-invalid"),void r.addClass("is-invalid");var i={processID:parseInt(e.val(),10),arrivalTime:parseInt(t.val(),10),burstTime:parseInt(r.val(),10)};W.push(i),$("#tblProcessList > tbody:last-child").append(`<tr>
                    <td id="tdProcessID">${e.val()}</td>
                    <td id="tdArrivalTime">${t.val()}</td>
                    <td id="tdBurstTime">${r.val()}</td>
                </tr>`),e.val(""),t.val(""),r.val("")}),$("#btnCalculate").on("click",function(){if(0==W.length)alert("Please insert some processes");else{var e=$("#algorithmSelector").children("option:selected").val();if("optFCFS"===e){for(var r=0,i=[],t=[];0<W.length||0<i.length;){for(;0==i.length;)r++,o();process=i.shift();for(var s=0;s<process.burstTime;s++)r++,o();process.completedTime=r,process.turnAroundTime=process.completedTime-process.arrivalTime,process.waitingTime=process.turnAroundTime-process.burstTime,t.push(process)}function o(){for(var e,t=0;t<W.length;t++)r>=W[t].arrivalTime&&(e={processID:W[t].processID,arrivalTime:W[t].arrivalTime,burstTime:W[t].burstTime},W.splice(t,1),i.push(e))}$.each(t,function(e,t){$("#tblResults > tbody:last-child").append(`<tr>
                        <td id="tdProcessID">${t.processID}</td>
                        <td id="tdArrivalTime">${t.arrivalTime}</td>
                        <td id="tdBurstTime">${t.burstTime}</td>
                        <td id="tdBurstTime">${t.completedTime}</td>
                        <td id="tdBurstTime">${t.waitingTime}</td>
                        <td id="tdBurstTime">${t.turnAroundTime}</td>
                    </tr>`)});var d=0,n=0,a=0;$.each(t,function(e,t){t.completedTime>a&&(a=t.completedTime),d+=t.turnAroundTime,n+=t.waitingTime}),$("#avgTurnaroundTime").val(d/t.length),$("#avgWaitingTime").val(n/t.length),$("#throughput").val(t.length/a)}if("optSJF"===e){for(var m=[],u=0,T=[];0<W.length||0<T.length;){for(c();0==T.length;)u++,c();processToRun=function(){0!=T.length&&T.sort(function(e,t){return e.burstTime>t.burstTime?1:-1});return T.shift()}();for(var l=0;l<processToRun.burstTime;l++)u++,c();processToRun.processID=processToRun.processID,processToRun.arrivalTime=processToRun.arrivalTime,processToRun.burstTime=processToRun.burstTime,processToRun.completedTime=u,processToRun.turnAroundTime=processToRun.completedTime-processToRun.arrivalTime,processToRun.waitingTime=processToRun.turnAroundTime-processToRun.burstTime,m.push(processToRun)}function c(){for(var e,t=0;t<W.length;t++)W[t].arrivalTime===u&&(e={processID:W[t].processID,arrivalTime:W[t].arrivalTime,burstTime:W[t].burstTime},W.splice(t,1),T.push(e))}$.each(m,function(e,t){$("#tblResults > tbody:last-child").append(`<tr>
                        <td id="tdProcessID">${t.processID}</td>
                        <td id="tdArrivalTime">${t.arrivalTime}</td>
                        <td id="tdBurstTime">${t.burstTime}</td>
                        <td id="tdBurstTime">${t.completedTime}</td>
                        <td id="tdBurstTime">${t.waitingTime}</td>
                        <td id="tdBurstTime">${t.turnAroundTime}</td>
                    </tr>`)});var p=0,v=0,h=0;$.each(m,function(e,t){t.completedTime>h&&(h=t.completedTime),p+=t.turnAroundTime,v+=t.waitingTime}),$("#avgTurnaroundTime").val(p/m.length),$("#avgWaitingTime").val(v/m.length),$("#throughput").val(m.length/h)}if("optSRTF"===e){for(var f=[],g=0,b=[];0<W.length||0<b.length;){for(I();0==b.length;)g++,I();0!=b.length&&(b.sort(function(e,t){return e.burstTime>t.burstTime?1:-1}),1==b[0].burstTime?((process=b.shift()).completedTime=g+1,f.push(process)):1<b[0].burstTime&&(process=b[0],b[0].burstTime=process.burstTime-1)),g++,I()}function I(){for(var e,t=0;t<W.length;t++)W[t].arrivalTime===g&&(e={processID:W[t].processID,arrivalTime:W[t].arrivalTime,burstTime:W[t].burstTime},W.splice(t,1),b.push(e))}var D=[],R=($("#tblProcessList tr").each(function(e,t){D[e]={processID:parseInt($(t).find("td:eq(0)").text()),arrivalTime:parseInt($(t).find("td:eq(1)").text()),burstTime:parseInt($(t).find("td:eq(2)").text())}}),D.splice(0,1),D.forEach(t=>{f.forEach(e=>{t.processID==e.processID&&(e.burstTime=t.burstTime,e.turnAroundTime=e.completedTime-e.arrivalTime,e.waitingTime=e.turnAroundTime-e.burstTime)})}),$.each(f,function(e,t){$("#tblResults > tbody:last-child").append(`<tr>
                        <td id="tdProcessID">${t.processID}</td>
                        <td id="tdArrivalTime">${t.arrivalTime}</td>
                        <td id="tdBurstTime">${t.burstTime}</td>
                        <td id="tdBurstTime">${t.completedTime}</td>
                        <td id="tdBurstTime">${t.waitingTime}</td>
                        <td id="tdBurstTime">${t.turnAroundTime}</td>
                    </tr>`)}),0),A=0,B=0;$.each(f,function(e,t){t.completedTime>B&&(B=t.completedTime),R+=t.turnAroundTime,A+=t.waitingTime}),$("#avgTurnaroundTime").val(R/f.length),$("#avgWaitingTime").val(A/f.length),$("#throughput").val(f.length/B)}if("optRR"===e){var e=$("#timeQuantum"),w=parseInt(e.val(),10);if(""==e.val())alert("Please enter time quantum"),e.addClass("is-invalid");else{for(var P=[],q=0,x=[];0<W.length||0<x.length;){for(F();0==x.length;)q++,F();!function(){if(0!=x.length)if(x.sort(function(e,t){return e.burstTime>t.burstTime?1:-1}),x[0].burstTime<w){(process=x.shift()).completedTime=q+process.burstTime;for(var e=0;e<process.burstTime;e++)q++,F();P.push(process)}else if(x[0].burstTime==w){(process=x.shift()).completedTime=q+w,P.push(process);for(e=0;e<w;e++)q++,F()}else if(x[0].burstTime>w){process=x[0],x[0].burstTime=process.burstTime-w;for(e=0;e<w;e++)q++,F()}}()}var y=[],C=($("#tblProcessList tr").each(function(e,t){y[e]={processID:parseInt($(t).find("td:eq(0)").text()),arrivalTime:parseInt($(t).find("td:eq(1)").text()),burstTime:parseInt($(t).find("td:eq(2)").text())}}),y.splice(0,1),y.forEach(t=>{P.forEach(e=>{t.processID==e.processID&&(e.burstTime=t.burstTime,e.turnAroundTime=e.completedTime-e.arrivalTime,e.waitingTime=e.turnAroundTime-e.burstTime)})}),$.each(P,function(e,t){$("#tblResults > tbody:last-child").append(`<tr>
                        <td id="tdProcessID">${t.processID}</td>
                        <td id="tdArrivalTime">${t.arrivalTime}</td>
                        <td id="tdBurstTime">${t.burstTime}</td>
                        <td id="tdBurstTime">${t.completedTime}</td>
                        <td id="tdBurstTime">${t.waitingTime}</td>
                        <td id="tdBurstTime">${t.turnAroundTime}</td>
                    </tr>`)}),0),S=0,E=0;$.each(P,function(e,t){t.completedTime>E&&(E=t.completedTime),C+=t.turnAroundTime,S+=t.waitingTime}),$("#avgTurnaroundTime").val(C/P.length),$("#avgWaitingTime").val(S/P.length),$("#throughput").val(P.length/E)}function F(){for(var e,t=0;t<W.length;t++)W[t].arrivalTime===q&&(e={processID:W[t].processID,arrivalTime:W[t].arrivalTime,burstTime:W[t].burstTime},W.splice(t,1),x.push(e))}}}})});